<!DOCTYPE html>
<html lang="fa" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="ุฌุจุฑ ุฎุท ุฑุง ุจู ุฒุจุงู ุณุงุฏู ู ุจุง ูุซุงูโูุง ฺฉุงุฑุจุฑุฏ ุจุงููุฒุฏ! ฺฉุงูุดฺฏุฑ ุชุนุงูู ุดุงูู ุชุฑฺฉุจ ุฎุทุ ุงุณุชููุงู ุฎุทุ ูพุงูุ ุจูุนุฏุ ุฑุชุจู ูุงุชุฑุณุ ุงุจุฒุงุฑูุง ูุญุงุณุจู ูุงุชุฑุณ ู ุชูุถุญุงุช ููุด ูุตููุน Gemini.">

    <meta name="keywords"
        content="ุฌุจุฑ ุฎุท, ุขููุฒุด ุฌุจุฑ ุฎุท, ุชุฑฺฉุจ ุฎุท, ุงุณุชููุงู ุฎุท, ูพุงู, ุจุนุฏ, ุฑุชุจู ูุงุชุฑุณ, ูุถุง ุจุฑุฏุงุฑ, ูุงุชุฑุณ, ุญู ุฏุณุชฺฏุงู ูุนุงุฏูุงุช, ุขููุฒุด ุชุนุงูู, ฺฉุงูุดฺฏุฑ ุฌุจุฑ, ูุตุทู ุงุฑุดุฏ, linear algebra, interactive learning, vector space, matrix rank, basis, dimension, gemini api">

    <meta name="author" content="ูุตุทู ุงุฑุดุฏ ู Gemini">

    <meta property="og:title" content="ฺฉุงูุดฺฏุฑ ูพุดุฑูุชู ุฌุจุฑ ุฎุท | ุงุฏฺฏุฑ ุจุง ุทุนู ูุฑุฎ!">
    <meta property="og:description"
        content="ููุงูู ูพฺุฏู ุฌุจุฑ ุฎุท ูุซู ุชุฑฺฉุจ ุฎุทุ ูพุงูุ ุจุนุฏ ู ุฑุชุจู ูุงุชุฑุณ ุฑู ุจุง ูุซุงูโูุง ุฎูุฏูููุ ุงุจุฒุงุฑูุง ุชุนุงูู ู ฺฉูฺฉ ููุด ูุตููุน Gemini ุจู ุฑุงุญุช ุงุฏ ุจฺฏุฑ!">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://https://algebra.mosishon.ir/">
    <meta property="og:locale" content="fa_IR">

    <title>ฺฉุงูุดฺฏุฑ ููุง ุฌุจุฑ ุฎุท</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="icon" href="./favicon.ico" sizes="any">

    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Vazirmatn', sans-serif;
            background-color: #f0f2f5;
            color: #333;
        }

        .section-card {
            background-color: #ffffff;
            border: 1px solid #d9d9d9;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
            border-radius: 12px;
        }

        aside {
            background-color: #2c3e50;
        }

        .nav-link.active-nav-link {
            background-color: #3498db !important;
            color: white !important;
            font-weight: 700;
        }

        .nav-link:hover {
            background-color: #2980b9 !important;
        }

        .action-button {
            background-color: #3498db;
            color: white;
            font-weight: 500;
            padding: 0.7rem 1.4rem;
            border-radius: 8px;
            transition: background-color 0.2s, transform 0.1s, box-shadow 0.2s;
            display: inline-flex;
            align-items: center;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
        }

        .action-button:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.15);
        }

        .action-button:disabled {
            background-color: #95a5a6;
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }

        .action-button .sparkle {
            margin-right: 8px;
            font-size: 1.3em;
            line-height: 1;
        }

        h1,
        h2,
        h3,
        h4 {
            font-weight: 700;
        }

        h2 {
            color: #2980b9;
        }

        .math {
            direction: ltr;
            font-family: 'Latin Modern Math', 'Cambria Math', 'Times New Roman', Times, serif;
            font-size: 1.2em;
            padding: 0 4px;
            display: inline-block;
            color: #2c3e50;
        }

        .vector {
            font-weight: bold;
            font-style: italic;
        }

        .matrix-display-wrapper {
            margin-bottom: 1rem;
        }

        .matrix-display {
            display: inline-flex;
            align-items: center;
            vertical-align: middle;
            border-left: 2px solid #3498db;
            border-right: 2px solid #3498db;
            padding: 4px 12px;
            margin: 3px 8px;
            background-color: #ecf0f1;
            border-radius: 8px;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.05);
        }

        .matrix-display table {
            display: inline-block;
            vertical-align: middle;
            margin: 0;
            padding: 0;
            border-collapse: collapse;
        }

        .matrix-display td {
            padding: 6px 12px;
            text-align: center;
            min-width: 40px;
            color: #34495e;
            font-weight: 500;
        }

        .step {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
            border: 1px solid #bdc3c7;
            margin-bottom: 16px;
            border-radius: 10px;
            background-color: #f9f9f9;
        }

        .step.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 480px;
            margin-left: auto;
            margin-right: auto;
            height: 270px;
            max-height: 330px;
            background-color: #fff;
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        @media (min-width: 640px) {
            .chart-container {
                height: 290px;
            }
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 310px;
            }
        }

        textarea,
        input[type="password"],
        input[type="text"] {
            direction: ltr;
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;
        }

        .input-field {
            border: 1px solid #bdc3c7;
            padding: 12px;
            border-radius: 6px;
            width: 100%;
            max-width: 480px;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.06);
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        .input-field:focus {
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.25);
            outline: none;
        }

        .matrix-input-area {
            min-height: 130px;
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(44, 62, 80, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1050;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out, visibility 0s 0.3s;
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
            transition: opacity 0.3s ease-in-out, visibility 0s;
        }

        .modal-content {
            background-color: white;
            padding: 2rem 2.5rem;
            border-radius: 10px;
            width: 90%;
            max-width: 750px;
            max-height: 90vh;
            overflow-y: auto;
            transform: translateY(-30px) scale(0.9);
            transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .modal.active .modal-content {
            transform: translateY(0) scale(1);
        }

        .modal-close-btn {
            position: absolute;
            top: 1rem;
            left: 1rem;
            background: #7f8c8d;
            color: white;
            border: none;
            font-size: 1.3rem;
            cursor: pointer;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            line-height: 36px;
            text-align: center;
            transition: background-color 0.2s;
        }

        .modal-close-btn:hover {
            background-color: #95a5a6;
        }

        .loading-spinner {
            border: 5px solid #ecf0f1;
            border-top: 5px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 0.7s linear infinite;
            margin: 2rem auto;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .prose-gemini h1,
        .prose-gemini h2,
        .prose-gemini h3 {
            color: #2980b9;
            font-weight: 700;
            margin-top: 1.2em;
            margin-bottom: 0.6em;
        }

        .prose-gemini p {
            margin-bottom: 1em;
            line-height: 1.75;
            color: #34495e;
        }

        .prose-gemini ul,
        .prose-gemini ol {
            margin-bottom: 1em;
            padding-right: 1.8em;
        }

        .prose-gemini li {
            margin-bottom: 0.4em;
        }

        .prose-gemini code {
            background-color: #ecf0f1;
            color: #c0392b;
            padding: 0.25em 0.5em;
            border-radius: 4px;
            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace;
            direction: ltr;
            display: inline-block;
            font-size: 0.9em;
        }

        .prose-gemini pre {
            background-color: #2c3e50;
            color: #ecf0f1;
            padding: 1.2em;
            border-radius: 8px;
            overflow-x: auto;
            direction: ltr;
            font-size: 0.9em;
            line-height: 1.6;
        }

        .prose-gemini pre code {
            background-color: transparent;
            color: inherit;
            padding: 0;
        }

        .prose-gemini strong {
            color: #2c3e50;
        }

        .prose-gemini em {
            color: #2980b9;
        }

        .api-key-status {
            font-size: 0.9rem;
            padding: 0.75rem 1rem;
            border-radius: 6px;
            margin-top: 0.75rem;
            text-align: center;
        }

        .api-key-set {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .api-key-not-set {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: #555;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px 0;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.8rem;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>

<body class="bg-gray-100 text-gray-900">

    <div class="flex h-screen">
        <aside class="w-72 bg-gray-800 text-gray-100 p-6 shadow-xl fixed top-0 right-0 h-full overflow-y-auto">
            <h1 class="text-3xl font-bold mb-10 text-center border-b border-gray-700 pb-5 text-white">ุฌุจุฑ ุฎุท ุจู ุฒุจุงู
                ุณุงุฏู</h1>
            <nav id="main-nav">
                <ul class="space-y-1">
                    <li><a href="#intro"
                            class="nav-link block p-3 rounded-md hover:bg-gray-700 font-semibold active-nav-link">ุฑููุ
                            ุฎูุด ุงููุฏ!</a></li>
                    <li><a href="#basic-concepts" class="nav-link block p-3 rounded-md hover:bg-gray-700">ููุงูู ูพุงูโุง
                            (ุจุฑุง ุดุฑูุน)</a></li>
                    <li><a href="#linear-combination" class="nav-link block p-3 rounded-md hover:bg-gray-700">ุฏุงุณุชุงู
                            ุชุฑฺฉุจ ุฎุท</a></li>
                    <li><a href="#span" class="nav-link block p-3 rounded-md hover:bg-gray-700">ูุถุง ูููุฏ ฺูุ</a></li>
                    <li><a href="#independence" class="nav-link block p-3 rounded-md hover:bg-gray-700">ุงุณุชููุงู ุฎุท ุนู
                            ฺุ</a></li>
                    <li><a href="#basis-dimension" class="nav-link block p-3 rounded-md hover:bg-gray-700">ูพุงู ู ุจูุนุฏุ
                            ุณุชููโูุง ูุถุง!</a></li>
                    <li><a href="#rank" class="nav-link block p-3 rounded-md hover:bg-gray-700">ุฑุชุจู ูุงุชุฑุณุ ูุฏุฑุชุด
                            ฺูุฏุฑูุ</a></li>
                    <li><a href="#matrix-tools" class="nav-link block p-3 rounded-md hover:bg-gray-700">ุฌุนุจู ุงุจุฒุงุฑ
                            ูุงุชุฑุณโูุง</a></li>
                    <li><a href="#big-theorem" class="nav-link block p-3 rounded-md hover:bg-gray-700">ูุถู ุฎููู
                            (ููโุงุฑุฒโูุง)</a></li>
                    <li><a href="#api-settings"
                            class="nav-link block p-3 rounded-md hover:bg-gray-700 border-t border-gray-600 mt-6 pt-4">ุชูุธูุงุช
                            ฺฉูุฏ Gemini</a></li>
                </ul>
            </nav>
            <div class="mt-auto pt-8 border-t border-gray-700 text-xs text-center text-gray-400">
                <p>ุชูุฏู ุจู ููู ูุฑุฎโูุง ุนุงุดู ุฌุจุฑ!</p>
                <p class="mt-1">ุจุง ุงุฏูโูุง ู ููุฑุงู ูุตุทู ุงุฑุดุฏุ ุฑูู ูุฑุฎ.</p>
            </div>
        </aside>

        <main class="flex-1 mr-72 p-6 sm:p-10 overflow-y-auto">

            <section id="intro" class="content-section">
                <div class="section-card p-8 sm:p-12 rounded-xl shadow-xl">
                    <h2 class="text-3xl sm:text-4xl font-bold mb-6">ุฎุจ ุฑููุ ุจู ฺฉุงูุดฺฏุฑ ุฌุจุฑ ุฎุท ุฎูุด ุงููุฏ!</h2>
                    <p class="text-lg leading-relaxed text-gray-700">
                        ูุฑุงุฑู ุจุง ูู ู ุณูุฑ ุจุงุญุงู ุจู ุฏูุง ุฌุจุฑ ุฎุท ุฏุงุดุชู ุจุงุดู. ุฌุฒููโุง ฺฉู ุฏุงุดุช ุฑู ุฑุฎุชู ุงูุฌุงุ ูู ูู
                        ุงููุฌูุฑ ุฎุดฺฉ ู ฺฉุชุงุจ! ู ฺฉุงุฑ ฺฉุฑุฏู ฺฉู ุจุชูู ุจุง ูุซุงูโูุง ูุฑ ุจุฑุ ุฎูุฏุช ูุญุงุณุจู ฺฉู ู ูุดูฺฏ ุจููู ูุฑ
                        ููููู ุนู ฺ.
                    </p>
                    <p class="mt-5 text-lg leading-relaxed text-gray-700">
                        ุงุฒ ููู ุณูุช ุฑุงุณุชุ ูุฑ ูุจุญุซ ุฑู ฺฉู ุนุดูุช ฺฉุดุฏ ุงูุชุฎุงุจ ฺฉู. ุงูู ุงุฒ ูููุ ู ุณุฑ ุจู "ููุงูู ูพุงูโุง" ุจุฒู
                        ุงฺฏู ุชุงุฒู ฺฉุงุฑ! ุจุนุฏุด ุชู ูุฑ ุจุฎุดุ ุงูู ู ุชูุถุญ ุฎูุฏููู ูุฏูุ ุจุนุฏุด ุจุง ู ูุซุงู ูุฑู ุชู ุฏู ูุงุฌุฑุง ู
                        ุงฺฏู ุฎูุงุณุช ุนููโุชุฑ ุจุดุ ูโุชูู ุงุฒ ุฑููููู Gemini ูู ฺฉูฺฉ ุจฺฏุฑ (ููุท ุงุฏุช ูุฑู ุชู ุจุฎุด "ุชูุธูุงุช
                        ฺฉูุฏ Gemini" ฺฉูุฏ API ุฎูุฏุช ุฑู ุจูุด ุจุฏ). ู "ุฌุนุจู ุงุจุฒุงุฑ ูุงุชุฑุณ" ูู ฺฏุฐุงุดุชู ฺฉู ูุฑฺ ุฏูุช ุฎูุงุณุช ุจุง
                        ูุงุชุฑุณโูุง ุญุณุงุจ ฺฉุชุงุจ ฺฉู. ุฎูุงุตู ฺฉู ุงูุฌุง ุฎุจุฑ ุงุฒ ุญูุธ ฺฉุฑุฏู ูุณุชุ ููุท ุฏุฑฺฉ ู ุดููุฏ! ุญุงูุดู ุจุจุฑ!
                    </p>
                </div>
            </section>

            <section id="basic-concepts" class="content-section hidden">
                <div class="section-card p-6 sm:p-8 rounded-xl shadow-lg">
                    <h2 class="text-2xl sm:text-3xl font-bold mb-6">ููุงูู ูพุงูโุง (ุจุฑุง ฺฏุฑู ฺฉุฑุฏู!)</h2>
                    <p class="mb-8 text-gray-700 leading-relaxed">ุฑููุ ูุจู ุงูฺฉู ุดุฑุฌู ุจุฒูู ุชู ูุจุงุญุซ ุงุตูุ ุจุง ฺูุฏุชุง
                        ฺุฒ ุณุงุฏู ูู ููู ุฑู ุจุง ูู ูุฑูุฑ ฺฉูู. ุงูุง ูุซู ุงููุจุง ุฌุจุฑ ุฎุทโุงู!</p>

                    <div class="space-y-8">
                        <div>
                            <h3 class="text-xl font-semibold mb-3 text-gray-800 flex items-center">
                                <span class="text-2xl mr-3 text-blue-600">๐ข</span> ุชุฑฺฉุจ ุฎุท ฺู ุจู ุฒุจูู ุฎู ุณุงุฏูุ
                                <button class="action-button gemini-button mr-auto text-sm py-1 px-3"
                                    data-concept="ุชุฑฺฉุจ ุฎุท ุจุฑุฏุงุฑูุง ุจู ุฒุจุงู ุจุณุงุฑ ุณุงุฏู ุจุฑุง ูุจุชุฏุงู" data-type="deeper">
                                    Gemini ุจุดุชุฑ ุจฺฏู <span class="sparkle mr-1 text-base">โจ</span>
                                </button>
                            </h3>
                            <p class="text-gray-700 leading-relaxed pl-10">ูฺฉุฑ ฺฉู ฺูุฏุชุง ุขุฌุฑ (<span
                                    class="math vector">v<sub>1</sub>, v<sub>2</sub></span>) ุฏุงุฑ. ุชุฑฺฉุจ ุฎุท ุนู ุจุง ุงู
                                ุขุฌุฑูุง ู ุฏูุงุฑ (<span class="math vector">v</span>) ุจุณุงุฒ. ฺุทูุฑุ ูุซูุงู ฒ ุชุง ุงุฒ ุขุฌุฑ
                                <span class="math"><span class="vector">v</span><sub>1</sub></span> ุฑู ุจุฐุงุฑ ฺฉูุงุฑ ณ ุชุง
                                ุงุฒ ุขุฌุฑ <span class="math"><span class="vector">v</span><sub>2</sub></span>. ุงูู ุฏูุงุฑ
                                ููุง ูุดู ุชุฑฺฉุจ ุฎุท ุขุฌุฑูุงุช! <br><span class="math">2<span
                                        class="vector">v</span><sub>1</sub> + 3<span class="vector">v</span><sub>2</sub>
                                    = <span class="vector">v</span></span>. ุงูู ุนุฏุฏูุง ฒ ู ณ ูููู ุงุณฺฉุงูุฑูุง ูุณุชู.
                            </p>
                            <p class="mt-2 pl-10 text-sm text-gray-600"><strong>ูุซุงู:</strong> ุงฺฏู <span
                                    class="math"><span class="vector">v</span><sub>1</sub> = (1,0)</span> ู <span
                                    class="math"><span class="vector">v</span><sub>2</sub> = (0,1)</span> ุจุงุดูุ ุจุฑุฏุงุฑ
                                <span class="math"><span class="vector">w</span> = (3,2)</span> ู ุชุฑฺฉุจ ุฎุทูุ ฺูู:
                                <span class="math">3(1,0) + 2(0,1) = (3,2)</span>.
                            </p>
                        </div>

                        <div>
                            <h3 class="text-xl font-semibold mb-3 text-gray-800 flex items-center">
                                <span class="text-2xl mr-3 text-blue-600">๐</span> ุฒุฑูุถุง ุนู ฺุ ู ฺฏูุดู ุฏูุฌ ุชู ูุถุง
                                ุจุฒุฑฺฏ!
                                <button class="action-button gemini-button mr-auto text-sm py-1 px-3"
                                    data-concept="ููููู ุฒุฑูุถุง ุจู ุฒุจุงู ุจุณุงุฑ ุณุงุฏู ุจุฑุง ูุจุชุฏุงู" data-type="deeper">
                                    Gemini ุจุดุชุฑ ุจฺฏู <span class="sparkle mr-1 text-base">โจ</span>
                                </button>
                            </h3>
                            <p class="text-gray-700 leading-relaxed pl-10">ูฺฉุฑ ฺฉู ฺฉู <span
                                    class="math">โ<sup>3</sup></span> (ูุถุง ุณู ุจุนุฏ ฺฉู ุชูุด ุฒูุฏฺฏ ูโฺฉูู) ู ุงุชุงู ุฎู
                                ุจุฒุฑฺฏู. ู "ุฒุฑูุถุง" ูุซู ู ฺฏูุดู ุงุฒ ุงูู ุงุชุงูู (ูุซูุงู ฺฉู ุงุชุงูุ ุง ู ุฎุท ุฑุงุณุช ฺฉู ุงุฒ ู ฺฏูุดู
                                ุงุชุงู ุจู ฺฏูุดู ุฏฺฏู ฺฉุดุฏู ุดุฏู) ฺฉู ุฎูุฏุด ูู ู ุณุฑ ููุงูู ุฑู ุฑุนุงุช ูโฺฉูู: <br>ฑ. ุญุชูุงู ูุจุฏุฃ
                                ูุฎุชุตุงุช (ููุทู ุตูุฑ) ุชูุด ุจุงุดู. <br>ฒ. ุงฺฏู ุฏูุชุง ุจุฑุฏุงุฑ ุงุฒ ุงูู ฺฏูุดู ุจุฑุฏุงุฑุ ุฌูุนุดูู ูู ุจุงุฏ ุชู
                                ูููู ฺฏูุดู ุจุงุดู. <br>ณ. ุงฺฏู ู ุจุฑุฏุงุฑ ุงุฒ ุงูู ฺฏูุดู ุจุฑุฏุงุฑ ู ุชู ู ุนุฏุฏ ุถุฑุจุด ฺฉูุ ุจุงุฒู ุจุงุฏ
                                ุชู ูููู ฺฏูุดู ุจูููู. ุงฺฏู ุงูุง ุจุฑูุฑุงุฑ ุจูุฏุ ุงูู ฺฏูุดู ู ุฒุฑูุถุงุณุช!</p>
                            <p class="mt-2 pl-10 text-sm text-gray-600"><strong>ูุซุงู:</strong> ฺฉู ุตูุญู <span
                                    class="math">xy</span> (ุนู ููู ุจุฑุฏุงุฑูุง ฺฉู ูุคููู <span class="math">z</span> ุดูู
                                ุตูุฑู) ู ุฒุฑูุถุง ุงุฒ <span class="math">โ<sup>3</sup></span> ูุณุช. ุง ูุฑ ุฎุท ฺฉู ุงุฒ ูุจุฏุฃ
                                ุจฺฏุฐุฑู.</p>
                        </div>

                        <div>
                            <h3 class="text-xl font-semibold mb-3 text-gray-800 flex items-center">
                                <span class="text-2xl mr-3 text-blue-600">๐งฎ</span> ุญู ุฏุณุชฺฏุงู ุจุง ูุงุชุฑุณ ฺุทูุฑูุ ู ุฑุงู
                                ูุงูุจุฑ!
                                <button class="action-button gemini-button mr-auto text-sm py-1 px-3"
                                    data-concept="ุฑูุด ุญู ุฏุณุชฺฏุงู ูุนุงุฏูุงุช ุฎุท ุจุง ุงุณุชูุงุฏู ุงุฒ ูุงุชุฑุณโูุง ุจุฑุง ูุจุชุฏุงู"
                                    data-type="deeper">
                                    Gemini ุจุดุชุฑ ุจฺฏู <span class="sparkle mr-1 text-base">โจ</span>
                                </button>
                            </h3>
                            <p class="text-gray-700 leading-relaxed pl-10">ุงุฏุชู ุชู ูุฏุฑุณู ุฏุณุชฺฏุงู ูุนุงุฏูู ุญู ูโฺฉุฑุฏูุ
                                ูุซูุงู:<br><span class="math">{ x + y = 3</span><br><span class="math">{ 2x - y =
                                    0</span><br>ูุดู ุงูู ุจุง ูุงุชุฑุณโูุง ูู ููุดุช ู ุญู ฺฉุฑุฏ! ุถุฑุงุจ ูุชุบุฑูุง ุฑู ูโุฑุฒู ุชู ู
                                ูุงุชุฑุณ (<span class="math">A</span>)ุ ุฎูุฏ ูุชุบุฑูุง ุฑู ุชู ู ุจุฑุฏุงุฑ ุณุชูู (<span
                                    class="math vector">X</span>)ุ ู ุนุฏุฏูุง ุณูุช ุฑุงุณุช ุฑู ูู ุชู ู ุจุฑุฏุงุฑ ุณุชูู ุฏฺฏู (<span
                                    class="math vector">b</span>). ุงูู ููุช ุฏุณุชฺฏุงู ูุดู <span class="math">A<span
                                        class="vector">X</span> = <span class="vector">b</span></span>. ุจุนุฏุด ุจุง ู ุณุฑ
                                ุนููุงุช ุฑู ูุงุชุฑุณ <span class="math">A</span> ู <span class="math vector">b</span> (ฺฉู
                                ุจูุด ูฺฏู ูุงุชุฑุณ ุงูุฒูุฏู <span class="math">[A|b]</span>) ูโุชููู <span
                                    class="math">x</span> ู <span class="math">y</span> ุฑู ูพุฏุง ฺฉูู. ุฎู ููุชุง ุณุฑุนโุชุฑ
                                ุงุฒ ุฑูุดโูุง ุณูุชูุ ูุฎุตูุตุงู ุจุฑุง ุฏุณุชฺฏุงูโูุง ุจุฒุฑฺฏ.</p>
                            <p class="mt-2 pl-10 text-sm text-gray-600"><strong>ูุซุงู:</strong> ุฏุณุชฺฏุงู ุจุงูุง ุฑู ูุดู
                                ุงูุฌูุฑ ุจุง ูุงุชุฑุณ ุงูุฒูุฏู ูุดูู ุฏุงุฏ ู ุญู ฺฉุฑุฏ:<br>
                            <div class="matrix-display ml-10">
                                <table>
                                    <tbody>
                                        <tr>
                                            <td>1</td>
                                            <td>1</td>
                                            <td>|</td>
                                            <td>3</td>
                                        </tr>
                                        <tr>
                                            <td>2</td>
                                            <td>-1</td>
                                            <td>|</td>
                                            <td>0</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <span class="math"> โ ... โ </span>
                            <div class="matrix-display">
                                <table>
                                    <tbody>
                                        <tr>
                                            <td>1</td>
                                            <td>0</td>
                                            <td>|</td>
                                            <td>1</td>
                                        </tr>
                                        <tr>
                                            <td>0</td>
                                            <td>1</td>
                                            <td>|</td>
                                            <td>2</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <br>ฺฉู ุนู <span class="math">x=1</span> ู <span class="math">y=2</span>.</p>
                        </div>
                    </div>
                </div>
            </section>


            <section id="linear-combination" class="content-section hidden">
                <div class="section-card p-6 sm:p-8 rounded-xl shadow-lg">
                    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6">
                        <h2 class="text-2xl sm:text-3xl font-bold mb-3 sm:mb-0">ุฏุงุณุชุงู ุชุฑฺฉุจ ุฎุท ฺูุ</h2>
                        <button class="action-button gemini-button" data-concept="ุชุฑฺฉุจ ุฎุท ุจุฑุฏุงุฑูุง" data-type="deeper">
                            ุจูพุฑุณ ุงุฒ Gemini <span class="sparkle mr-2">โจ</span>
                        </button>
                    </div>
                    <p class="mb-6 text-gray-700 leading-relaxed">ุจุจู ุณุงุฏูโุงุณ! ููุช ูฺฏู ู ุจุฑุฏุงุฑ <span
                            class="math"><span class="vector">v</span></span> ุชุฑฺฉุจ ุฎุท ุงุฒ ฺูุฏุชุง ุจุฑุฏุงุฑ ุฏฺฏู ูุซู <span
                            class="math"><span class="vector">v</span><sub>1</sub>, ..., <span
                                class="vector">v</span><sub>n</sub></span> ูุณุชุ ุนู ุงูฺฏุงุฑ ุฏุงุฑู ุจุง ุงูู ุจุฑุฏุงุฑุง ูพุงูุ ู
                        ุฌูุฑ ุฏุณุชูุฑ ูพุฎุช ุจุฑุง <span class="math"><span class="vector">v</span></span> ูโููุณู. ฺุทูุฑุ ูุฑ
                        ฺฉุฏูู ุงุฒ ุงูู ุจุฑุฏุงุฑุง ูพุงู ุฑู ุชู ู ุนุฏุฏ (ุงุณฺฉุงูุฑ <span class="math">c<sub>i</sub></span>) ุถุฑุจ
                        ูโฺฉูู ู ุจุนุฏ ูููโุฑู ุจุง ูู ุฌูุน ูโฺฉูู. ุงฺฏู ุชูุด ุจู <span class="math"><span
                                class="vector">v</span></span> ุฑุณุฏูุ ุนู ุขุฑูุ ุชุฑฺฉุจ ุฎุทู! ูุฑูููุดู ุงูู: <span
                            class="math"><span class="vector">v</span> = c<sub>1</sub><span
                                class="vector">v</span><sub>1</sub> + ... + c<sub>n</sub><span
                                class="vector">v</span><sub>n</sub></span>. ุจุฑุง ุงูฺฉู ุจูููู ุงู ุงุชูุงู ููุชู ุง ููุ
                        ูุนูููุงู ูพุงุด ููุชู ุจู ุญู ู ุฏุณุชฺฏุงู ูุนุงุฏูู ุฎุท.</p>
                    <h3 class="text-xl font-semibold mb-3 text-gray-800">ูุซุงู ุฎูุฏููู: ุขุง ุจุฑุฏุงุฑ <span
                            class="math"><span class="vector">w</span> = (5, 5)</span> ุจุง <span class="math"><span
                                class="vector">v</span><sub>1</sub> = (1, 2)</span> ู <span class="math"><span
                                class="vector">v</span><sub>2</sub> = (3, 1)</span> ุณุงุฎุชู ูุดูุ</h3>
                    <button id="solve-lc-btn" class="action-button mb-4">ุจุจูู ฺ ูุดู!</button>
                    <div id="lc-solution" class="mt-6 space-y-4">
                        <div class="step p-4 bg-blue-50 rounded-md">
                            <h4 class="font-semibold text-blue-800">ูุฏู ุงูู: ูุนุงุฏูู ุฑู ุจฺูู</h4>
                            <p class="math">c<sub>1</sub>(1, 2) + c<sub>2</sub>(3, 1) = (5, 5)</p>
                        </div>
                        <div class="step p-4 bg-blue-50 rounded-md">
                            <h4 class="font-semibold text-blue-800">ูุฏู ุฏูู: ุชุจุฏูุด ฺฉูู ุจู ุฏุณุชฺฏุงู ูุนุงุฏูู</h4>
                            <p class="math">{ c<sub>1</sub> + 3c<sub>2</sub> = 5</p>
                            <p class="math">{ 2c<sub>1</sub> + c<sub>2</sub> = 5</p>
                        </div>
                        <div class="step p-4 bg-blue-50 rounded-md">
                            <h4 class="font-semibold text-blue-800">ูุฏู ุณูู: ุฏุณุชฺฏุงู ุฑู ุญู ฺฉูู</h4>
                            <p class="text-gray-700">ุจุนุฏ ุงุฒ ุญู ฺฉุฑุฏู (ฺฉู ุฎูุฏุช ุงุณุชุงุฏ!)ุ ูโุจูู:</p>
                            <p class="math">c<sub>1</sub> = 2</p>
                            <p class="math">c<sub>2</sub> = 1</p>
                        </div>
                        <div class="step p-4 bg-green-100 text-green-800 rounded-md">
                            <h4 class="font-semibold">ูุชุฌู ููุง ุฏุงุณุชุงู</h4>
                            <p>ุขุฑู ุฏุงุฏุงุด! ฺูู <span class="math">c<sub>1</sub></span> ู <span
                                    class="math">c<sub>2</sub></span> ูพุฏุง ุดุฏูุ ูพุณ <span class="math"><span
                                        class="vector">w</span></span> ุจุง ุงูู ุฏูุชุง ุณุงุฎุชู ูุดู: <span
                                    class="math mt-2">2(1, 2) + 1(3, 1) = (2, 4) + (3, 1) = (5, 5)</span>. ุฎูุฏุดู!</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="span" class="content-section hidden">
                <div class="section-card p-6 sm:p-8 rounded-xl shadow-lg">
                    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6">
                        <h2 class="text-2xl sm:text-3xl font-bold mb-3 sm:mb-0">ูุถุง ูููุฏ ุนู ฺ ุงุตูุงูุ</h2>
                        <button class="action-button gemini-button" data-concept="ูุถุง ูููุฏ ุง Span" data-type="deeper">
                            ุจูพุฑุณ ุงุฒ Gemini <span class="sparkle mr-2">โจ</span>
                        </button>
                    </div>
                    <p class="mb-6 text-gray-700 leading-relaxed">ูฺฉุฑ ฺฉู ฺูุฏุชุง ุจุฑุฏุงุฑ ุฏุงุฑุ ูุซูุงู <span
                            class="math"><span class="vector">v</span><sub>1</sub></span> ู <span class="math"><span
                                class="vector">v</span><sub>2</sub></span>. "ูุถุง ูููุฏ" ุงู ุฏูุชุง ุจุฑุฏุงุฑุ ุนู ูุฑฺ ุจุฑุฏุงุฑ
                        ฺฉู ูุดู ุจุง ุชุฑฺฉุจ ุฎุท ุงู ุฏูุชุง ุณุงุฎุช. ุงูฺฏุงุฑ ุงู ุฏูุชุง ุจุฑุฏุงุฑุ ููุงุฏ ุงููู ุชู ูุณุชู ู ุชู ุจุงูุงุดูู ูุฑฺ
                        ุจุชูู "ุชููุฏ" ูโฺฉู. ุงฺฏู ุงู ููุงุฏ ุงููู ุจุชููู ฺฉู ู ูุถุง (ูุซูุงู ฺฉู ุตูุญู <span
                            class="math">โ<sup>2</sup></span>) ุฑู ุจุณุงุฒูุ ูฺฏู "ูููุฏ" ุงูู ูุถุง ูุณุชู.</p>
                    <h3 class="text-xl font-semibold mb-3 text-gray-800">ูุซุงู: ุขุง <span class="math"><span
                                class="vector">v</span><sub>1</sub> = (1, 1)</span> ู <span class="math"><span
                                class="vector">v</span><sub>2</sub> = (2, 2)</span> ูุชููู ฺฉู <span
                            class="math">โ<sup>2</sup></span> ุฑู ุจุณุงุฒูุ</h3>
                    <button id="solve-span-btn" class="action-button mb-4">ุจุฑู ุจุจูู!</button>
                    <div id="span-solution" class="mt-6 space-y-4">
                        <div class="step p-4 bg-blue-50 rounded-md">
                            <h4 class="font-semibold text-blue-800">ูุฏู ุงูู: ูุนุงุฏูู ฺฉู</h4>
                            <p class="math">c<sub>1</sub>(1, 1) + c<sub>2</sub>(2, 2) = (x, y)</p>
                            <p class="text-sm text-gray-600">(ฺฉู <span class="math">(x,y)</span> ู ุจุฑุฏุงุฑ ุฏูุฎูุงู ุชู
                                <span class="math">โ<sup>2</sup></span> ูุณุช)
                            </p>
                        </div>
                        <div class="step p-4 bg-blue-50 rounded-md">
                            <h4 class="font-semibold text-blue-800">ูุฏู ุฏูู: ุฏุณุชฺฏุงู ูุนุงุฏูุงุชุด</h4>
                            <p class="math">{ c<sub>1</sub> + 2c<sub>2</sub> = x</p>
                            <p class="math">{ c<sub>1</sub> + 2c<sub>2</sub> = y</p>
                        </div>
                        <div class="step p-4 bg-blue-50 rounded-md">
                            <h4 class="font-semibold text-blue-800">ูุฏู ุณูู: ู ูฺฏุงู ุจู ุฏุณุชฺฏุงู ุจูุฏุงุฒู</h4>
                            <p class="text-gray-700">ูุนูููู ฺฉู ุงู ุฏุณุชฺฏุงู ููุท ููุช ุฌูุงุจ ุฏุงุฑู ฺฉู <span class="math">x =
                                    y</span> ุจุงุดู. ุนู ุณูุช ฺูพ ูุฑ ุฏู ูุนุงุฏูู ฺฉู!</p>
                        </div>
                        <div class="step p-4 bg-red-100 text-red-800 rounded-md">
                            <h4 class="font-semibold">ูุชุฌู ุฏุงุณุชุงู</h4>
                            <p>ุงู ุฏูุชุง ุจุฑุฏุงุฑ ููุท ูุชููู ุจุฑุฏุงุฑูุง ุฑู ุจุณุงุฒู ฺฉู ุฑู ุฎุท <span class="math">y=x</span> ูุณุชู
                                (ูุซูุงู <span class="math">(3,3)</span> ุง <span class="math">(-1,-1)</span>). ูพุณ ููุชููู
                                ฺฉู <span class="math">โ<sup>2</sup></span> ุฑู ูพูุดุด ุจุฏู. ุฏุฑ ูุชุฌูุ ูููุฏ <span
                                    class="math">โ<sup>2</sup></span> <span class="font-bold">ูุณุชู</span>. ุงูฺฏุงุฑ ููุงุฏ
                                ุงูููโููู ฺฉูู ุง ุชููุน ูุฏุงุฑู!</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="independence" class="content-section hidden">
                <div class="section-card p-6 sm:p-8 rounded-xl shadow-lg">
                    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6">
                        <h2 class="text-2xl sm:text-3xl font-bold mb-3 sm:mb-0">ุงุณุชููุงู ุฎุท ุนู ฺ ุจู ุฒุจูู ุณุงุฏูุ</h2>
                        <button class="action-button gemini-button" data-concept="ุงุณุชููุงู ู ูุงุจุณุชฺฏ ุฎุท ุจุฑุฏุงุฑูุง"
                            data-type="deeper">
                            ุจูพุฑุณ ุงุฒ Gemini <span class="sparkle mr-2">โจ</span>
                        </button>
                    </div>
                    <p class="mb-6 text-gray-700 leading-relaxed">ุงฺฏู ฺูุฏุชุง ุจุฑุฏุงุฑ ุฏุงุดุชู ุจุงุดุ ููุช ูฺฏู "ูุณุชูู ุฎุท"
                        ูุณุชูุ ุนู ูฺ ฺฉุฏููุดูู ุฒุงุฏ ูุณุชู! ููุดู ฺฉุดูู ุฑู ุจุง ุจูู ุณุงุฎุช. ูุฑ ฺฉุฏูู ู ุฌูุช ุง ุงุทูุงุนุงุช
                        ููุญุตุฑุจูโูุฑุฏ ุฏุงุฑู. ุงูุง ุงฺฏู "ูุงุจุณุชู ุฎุท" ุจุงุดูุ ุนู ุญุฏุงูู ฺฉุดูู ููฺฏู ุจููโุงุณ ู ูุดู ุจุง ุชุฑฺฉุจ ุฎุท
                        ุจูู ุจูุด ุฑุณุฏ. ุฑุงู ุชุดุฎุตุด ูู ุงูู: ุชุฑฺฉุจ ุฎุทโุดูู ุฑู ูุณุงู ุจุฑุฏุงุฑ ุตูุฑ ุจุฐุงุฑ. ุงฺฏู ุชููุง ุฑุงู ุฑุณุฏู ุจู
                        ุตูุฑ ุงู ุจูุฏ ฺฉู ููู ุถุฑุจโูุง ุตูุฑ ุจุงุดูุ ูุณุชููู. ูฺฏุฑูู ูุงุจุณุชูโุงู.</p>
                    <h3 class="text-xl font-semibold mb-3 text-gray-800">ูุซุงู ุชุตูุฑ: ฺฉุฏูู ูุฌููุนู ูุณุชููโุชุฑูุ</h3>
                    <div class="flex flex-col sm:flex-row sm:space-x-8 sm:space-x-reverse mb-4">
                        <div class="mb-4 sm:mb-0">
                            <h4 class="font-semibold text-gray-700">ูุฌููุนู ฑ (ุฑููุง ุบุฑ ููโุฑุงุณุชุง)</h4>
                            <p class="math"><span class="vector">v</span><sub>1</sub> = (1, 2)</p>
                            <p class="math"><span class="vector">v</span><sub>2</sub> = (2, 1)</p>
                        </div>
                        <div>
                            <h4 class="font-semibold text-gray-700">ูุฌููุนู ฒ (ุฑููุง ููโุฎุท!)</h4>
                            <p class="math"><span class="vector">u</span><sub>1</sub> = (1, 2)</p>
                            <p class="math"><span class="vector">u</span><sub>2</sub> = (2, 4)</p>
                        </div>
                    </div>
                    <button id="solve-indep-btn" class="action-button mb-4">ุชุญููุดูู ฺฉูู!</button>
                    <div id="indep-solution" class="mt-6 grid md:grid-cols-2 gap-6">
                        <div class="step p-4 bg-green-100 text-green-800 rounded-md">
                            <h4 class="font-semibold">ุชุญูู ูุฌููุนู ฑ (<span class="math vector">v</span>ูุง)</h4>
                            <p>ุงฺฏู <span class="math">c<sub>1</sub>(1, 2) + c<sub>2</sub>(2, 1) = (0, 0)</span> ุฑู ุญู
                                ฺฉููุ ุชููุง ุฌูุงุจุด <span class="math">c<sub>1</sub>=0, c<sub>2</sub>=0</span> ูุณุช. ูพุณ ุงูุง
                                <span class="font-bold">ูุณุชูู ุฎุท</span> ูุณุชู. ูุฑ ฺฉุฏูู ุณุงุฒ ุฎูุฏุดููู ูุฒูู!
                            </p>
                            <div class="chart-container"><canvas id="indep-chart"></canvas></div>
                        </div>
                        <div class="step p-4 bg-red-100 text-red-800 rounded-md">
                            <h4 class="font-semibold">ุชุญูู ูุฌููุนู ฒ (<span class="math vector">u</span>ูุง)</h4>
                            <p>ุงูุฌุง <span class="math">c<sub>1</sub>(1, 2) + c<sub>2</sub>(2, 4) = (0, 0)</span> ุฌูุงุจ
                                ุบุฑ ุตูุฑ ูู ุฏุงุฑู! ูุซูุงู <span class="math">c<sub>1</sub>=2, c<sub>2</sub>=-1</span>. ูพุณ
                                ุงูุง <span class="font-bold">ูุงุจุณุชู ุฎุท</span> ูุณุชู. ุฏุฑ ูุงูุน <span class="math"><span
                                        class="vector">u</span><sub>2</sub></span> ุฏู ุจุฑุงุจุฑ <span class="math"><span
                                        class="vector">u</span><sub>1</sub></span> ูุณุชุ ุนู ุฒุงุฏู!</p>
                            <div class="chart-container"><canvas id="dep-chart"></canvas></div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="basis-dimension" class="content-section hidden">
                <div class="section-card p-6 sm:p-8 rounded-xl shadow-lg">
                    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6">
                        <h2 class="text-2xl sm:text-3xl font-bold mb-3 sm:mb-0">ูพุงู ู ุจูุนุฏุ ุณุชููโูุง ุงุตู ูุถุง!</h2>
                        <button class="action-button gemini-button" data-concept="ููููู ูพุงู ู ุจุนุฏ ุฏุฑ ูุถุง ุจุฑุฏุงุฑ"
                            data-type="deeper">
                            ุจูพุฑุณ ุงุฒ Gemini <span class="sparkle mr-2">โจ</span>
                        </button>
                    </div>
                    <p class="mb-6 text-gray-700 leading-relaxed">"ูพุงู" ูุซู ู ุชู ููุชุจุงูู ฺฉู ูุฑ ุจุงุฒฺฉูุด (ุจุฑุฏุงุฑ) ูู
                        ุณุชุงุฑูโุงุณ (ูุณุชูู ุฎุท) ู ูู ูโุชููู ฺฉู ุฒูู ุจุงุฒ (ูุถุง) ุฑู ูพูุดุด ุจุฏู (ูููุฏ). ุชุนุฏุงุฏ ุงู ุจุงุฒฺฉูุง ุงุตู
                        ุชูุ ูุดู "ุจูุนุฏ" ุงูู ุฒูู ุจุงุฒ! ุนู ฺฉูุชุฑู ุชุนุฏุงุฏ ุจุฑุฏุงุฑ ฺฉู ุจุฑุง ุณุงุฎุชู ฺฉู ูุถุง ูุงุฒูู ู ูฺฺฉุฏููุดูู
                        ูู ุงุถุงู ูุณุชู.</p>
                    <p class="mb-4 bg-blue-100 p-4 rounded-lg text-blue-800 text-base"><span class="font-bold">ู ูฺฉุชู
                            ุฎู ุฎูู:</span> ุงฺฏู ุจุฏูู ุจูุนุฏ ู ูุถุง <span class="math">n</span> ูุณุชุ ู <span
                            class="math">n</span> ุชุง ุจุฑุฏุงุฑ ุฏุงุดุชู ุจุงุด ฺฉู ูุณุชูู ุฎุท ุจุงุดูุ ุฏฺฏู ุดฺฉ ูฺฉูุ ุงููุง ุญุชูุงู ู ูพุงู
                        ุจุฑุง ุงูู ูุถุง ูุณุชู (ู ูููุฏ ูู ูุณุชู!). ุจุฑุนฺฉุณุด ูู ุฏุฑุณุชู.</p>
                    <h3 class="text-xl font-semibold mb-3 text-gray-800">ูุซุงู: ุขุง <span class="math">S = \{ (1, 1), (1,
                            -1) \}</span> ุชู ุงุตู (ูพุงู) ุจุฑุง <span class="math">โ<sup>2</sup></span> ูุณุชูุ</h3>
                    <button id="solve-basis-btn" class="action-button mb-4">ุจุฑุฑุณ ุชู!</button>
                    <div id="basis-solution" class="mt-6 space-y-4">
                        <div class="step p-4 bg-blue-50 rounded-md">
                            <h4 class="font-semibold text-blue-800">ูุฏู ุงูู: ุชุนุฏุงุฏ ุจุงุฒฺฉู ู ุงูุฏุงุฒู ุฒูู</h4>
                            <p class="text-gray-700">ุฒูู ุจุงุฒ ูุง <span class="math">โ<sup>2</sup></span> ูุณุช ฺฉู ฒ ุจูุนุฏ
                                ุฏุงุฑู. ุชู <span class="math">S</span> ูู ฒ ุชุง ุจุงุฒฺฉู (ุจุฑุฏุงุฑ) ุฏุงุฑู. ูพุณ ุดุฑุงุท ุงููู ุฌูุฑู!
                                ููุท ุจุงุฏ ุจุจูู ุจุงุฒฺฉูุง ูุณุชููู ุง ูู.</p>
                        </div>
                        <div class="step p-4 bg-blue-50 rounded-md">
                            <h4 class="font-semibold text-blue-800">ูุฏู ุฏูู: ุขุง ุจุงุฒฺฉูุง ูุณุชูู ุจุงุฒ ูโฺฉููุ</h4>
                            <p class="text-gray-700">ุงฺฏู <span class="math">c<sub>1</sub>(1, 1) + c<sub>2</sub>(1, -1) =
                                    (0, 0)</span> ุฑู ุญู ฺฉููุ ุชููุง ุฑุงูุด ุงูู ฺฉู <span
                                    class="math">c<sub>1</sub>=0</span> ู <span class="math">c<sub>2</sub>=0</span>
                                ุจุงุดู. ูพุณ ุขุฑูุ ูุณุชููู!</p>
                        </div>
                        <div class="step p-4 bg-green-100 text-green-800 rounded-md">
                            <h4 class="font-semibold">ูุชุฌู ููุง ุชู</h4>
                            <p>ฺูู ุชู <span class="math">S</span> ุฏูุชุง ุจุงุฒฺฉู ูุณุชูู ุชู ุฒูู ฒ ุจูุนุฏ <span
                                    class="math">โ<sup>2</sup></span> ุฏุงุฑูุ ูพุณ <span class="font-bold">ุฎูุฏุดู!</span>
                                ุงูุง ู ูพุงู ุชููพ ุจุฑุง <span class="math">โ<sup>2</sup></span> ูุณุชู.</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="rank" class="content-section hidden">
                <div class="section-card p-6 sm:p-8 rounded-xl shadow-lg">
                    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6">
                        <h2 class="text-2xl sm:text-3xl font-bold mb-3 sm:mb-0">ุฑุชุจู ูุงุชุฑุณุ ุนู ฺูุฏุฑ ูููุ</h2>
                        <button class="action-button gemini-button" data-concept="ุฑุชุจู ูุงุชุฑุณ ู ููููู ุขู"
                            data-type="deeper">
                            ุจูพุฑุณ ุงุฒ Gemini <span class="sparkle mr-2">โจ</span>
                        </button>
                    </div>
                    <p class="mb-6 text-gray-700 leading-relaxed">"ุฑุชุจู" ู ูุงุชุฑุณุ ุฎู ุณุงุฏู ุจุฎูุงู ุจฺฏูุ ุนู ุชุนุฏุงุฏ
                        ุณุทุฑูุง (ุง ุณุชููโูุง) ูุงูุนุงู ูุณุชูู ู ุจู ุฏุฑุฏ ุจุฎูุฑุด! ููุช ูุงุชุฑุณ ุฑู ุจู ูุฑู ูพูฺฉุงู ุฏุฑูุงุฑ (ูููู
                        ุนููุงุช ุณุทุฑ ฺฉู ุจูุฏ)ุ ุชุนุฏุงุฏ ุณุทุฑูุง ฺฉู ุตูุฑ ูุดุฏูุ ูุดู ุฑุชุจูโุงุด. ุงู ุฑุชุจู ูุดูู ูุฏู ฺฉู ูุงุชุฑุณ ูุง
                        ฺูุฏุฑ ุงุทูุงุนุงุช ูุณุชูู ุชู ุฎูุฏุด ุฏุงุฑู ุง ุจู ุนุจุงุฑุช ุฏฺฏูุ ุจูุนุฏ ูุถุง ฺฉู ุจุง ุณุทุฑูุงุด (ุง ุณุชููโูุงุด) ุณุงุฎุชู
                        ูุดู ฺูุฏุฑู.</p>
                    <h3 class="text-xl font-semibold mb-3 text-gray-800">ูุซุงู: ุฑุชุจู ูุงุชุฑุณ <span class="math">A</span>
                        ุฒุฑ ฺูุฏูุ</h3>
                    <div class="mb-4"><span class="math">A = </span>
                        <div class="matrix-display">
                            <table>
                                <tbody>
                                    <tr>
                                        <td>1</td>
                                        <td>2</td>
                                        <td>1</td>
                                    </tr>
                                    <tr>
                                        <td>1</td>
                                        <td>3</td>
                                        <td>2</td>
                                    </tr>
                                    <tr>
                                        <td>2</td>
                                        <td>5</td>
                                        <td>3</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <button id="solve-rank-btn" class="action-button mb-4">ุจุฑู ุณุฑุงุบ ูุญุงุณุจู!</button>
                    <div id="rank-solution" class="mt-6 space-y-4">
                        <div class="step p-4 bg-blue-50 rounded-md">
                            <h4 class="font-semibold text-blue-800">ูุฏู ุงูู: ุชุจุฏู ุจู ูุฑู ูพูฺฉุงู (REF)</h4>
                            <p class="text-gray-700">ุจุนุฏ ุงุฒ ุนููุงุช ุณุทุฑุ ุจู ุงู ูโุฑุณู:</p><span class="math">A โ ... โ
                            </span>
                            <div class="matrix-display">
                                <table>
                                    <tbody>
                                        <tr>
                                            <td>1</td>
                                            <td>2</td>
                                            <td>1</td>
                                        </tr>
                                        <tr>
                                            <td>0</td>
                                            <td>1</td>
                                            <td>1</td>
                                        </tr>
                                        <tr>
                                            <td>0</td>
                                            <td>1</td>
                                            <td>1</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="step p-4 bg-blue-50 rounded-md">
                            <h4 class="font-semibold text-blue-800">ูุฏู ุฏูู: ุชุจุฏู ุจู ูุฑู ูพูฺฉุงู ุชุญูู ุงูุชู (RREF)</h4>
                            <p class="text-gray-700">ู ุงฺฏู ุงุฏุงูู ุจุฏู ุชุง ุขุฎุฑุด:</p><span class="math">... โ </span>
                            <div class="matrix-display">
                                <table>
                                    <tbody>
                                        <tr>
                                            <td>1</td>
                                            <td>0</td>
                                            <td>-1</td>
                                        </tr>
                                        <tr>
                                            <td>0</td>
                                            <td>1</td>
                                            <td>1</td>
                                        </tr>
                                        <tr>
                                            <td>0</td>
                                            <td>0</td>
                                            <td>0</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="step p-4 bg-green-100 text-green-800 rounded-md">
                            <h4 class="font-semibold">ูุชุฌู ุฑุชุจู</h4>
                            <p>ูฺฏุงู ฺฉู! ุฏูุชุง ุณุทุฑ ุบุฑ ุตูุฑ ุฏุงุฑู. ูพุณ <span class="math font-bold">rank(A) = 2</span>. ุนู
                                ุงู ูุงุชุฑุณ ุฏูุชุง ุฌูุช ูุณุชูู ุฑู ูพูุดุด ูุฏู. ุงูู ุณุทุฑูุง ุบุฑ ุตูุฑ ูู ู ูพุงู ุจุฑุง ูุถุง ุณุทุฑุด
                                ูุณุชู: <span class="math">\{ (1, 0, -1), (0, 1, 1) \}</span>.</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="matrix-tools" class="content-section hidden">
                <div class="section-card p-6 sm:p-8 rounded-xl shadow-lg">
                    <h2 class="text-2xl sm:text-3xl font-bold mb-6">ุฌุนุจู ุงุจุฒุงุฑ ูุงุชุฑุณโูุง</h2>
                    <p class="mb-6 text-gray-700 leading-relaxed">ุฑููุ ุงูุฌุง ูโุชูู ุฎูุฏุช ุฏุณุช ุจู ฺฉุงุฑ ุด! ูุงุชุฑุณุช ุฑู
                        ูุงุฑุฏ ฺฉู ู ุจุจู ฺู ุฎุจุฑู. ุงุฒ ุชุจุฏู ุจู ูุฑู ูพูฺฉุงู ู ูุญุงุณุจู ุฑุชุจู ฺฏุฑูุชู ุชุง ุฏุชุฑููุงู ู ุชุฑุงููุงุฏู. ู
                        ุญุงู ุงุณุงุณ ุจู ูุงุชุฑุณุช ุจุฏู!</p>

                    <div class="mb-6">
                        <label for="matrix-operation-select" class="block text-sm font-medium text-gray-700 mb-2">ฺู
                            ุนููุงุช ูโุฎูุง ุงูุฌุงู ุจุฏุ</label>
                        <select id="matrix-operation-select"
                            class="input-field focus:ring-blue-500 focus:border-blue-500 w-full max-w-md">
                            <option value="rref_rank_basis">ูุฑู ูพูฺฉุงู/ุฑุชุจู/ูพุงู ุณุทุฑ</option>
                            <option value="determinant">ุฏุชุฑููุงู (ฒxฒ ุง ณxณ)</option>
                            <option value="transpose">ุชุฑุงููุงุฏู</option>
                            <option value="add">ุฌูุน ุฏู ูุงุชุฑุณ</option>
                            <option value="subtract">ุชูุฑู ุฏู ูุงุชุฑุณ</option>
                            <option value="scalar_multiply">ุถุฑุจ ุงุณฺฉุงูุฑ ุฏุฑ ูุงุชุฑุณ</option>
                        </select>
                    </div>

                    <div id="matrix-input-area-A-wrapper" class="mb-6">
                        <label for="matrix-input-A" class="block text-sm font-medium text-gray-700 mb-1">ูุงุชุฑุณ ุงูู (A)
                            ุฑู ูุงุฑุฏ ฺฉู:</label>
                        <p class="text-xs text-gray-500 mb-2">ูุฑ ุณุทุฑ ูุงุชุฑุณ ุฏุฑ ฺฉ ุฎุท ุฌุฏุฏ. ุงุนุฏุงุฏ ูุฑ ุณุทุฑ ุจุง ูุงุตูู ุง
                            ูุฑฺฏูู ุฌุฏุง ุจุดู.</p>
                        <textarea id="matrix-input-A" rows="5"
                            class="input-field matrix-input-area shadow-sm focus:ring-blue-500 focus:border-blue-500"
                            placeholder="ูุซุงู:&#10;1 2 3&#10;4 5 6"></textarea>
                    </div>

                    <div id="matrix-input-area-B-wrapper" class="mb-6 hidden">
                        <label for="matrix-input-B" class="block text-sm font-medium text-gray-700 mb-1">ูุงุชุฑุณ ุฏูู (B)
                            ุฑู ูุงุฑุฏ ฺฉู (ุจุฑุง ุฌูุน/ุชูุฑู):</label>
                        <textarea id="matrix-input-B" rows="5"
                            class="input-field matrix-input-area shadow-sm focus:ring-blue-500 focus:border-blue-500"
                            placeholder="ููโุงูุฏุงุฒู ุจุง ูุงุชุฑุณ A"></textarea>
                    </div>

                    <div id="scalar-input-wrapper" class="mb-6 hidden">
                        <label for="scalar-input" class="block text-sm font-medium text-gray-700 mb-1">ุงุณฺฉุงูุฑ (ุนุฏุฏ) ุฑู
                            ูุงุฑุฏ ฺฉู:</label>
                        <input type="text" id="scalar-input"
                            class="input-field focus:ring-blue-500 focus:border-blue-500 w-full max-w-xs"
                            placeholder="ูุซูุง: 2 ุง -1.5">
                    </div>

                    <button id="calculate-matrix-ops-btn" class="action-button">ูุญุงุณุจู ฺฉู!</button>
                    <div id="matrix-ops-results" class="mt-8 space-y-6"></div>
                </div>
            </section>

            <section id="api-settings" class="content-section hidden">
                <div class="section-card p-6 sm:p-8 rounded-xl shadow-lg">
                    <h2 class="text-2xl sm:text-3xl font-bold mb-6">ุชูุธูุงุช ฺฉูุฏ API Gemini</h2>
                    <p class="mb-4 text-gray-700 leading-relaxed">ุฎุจ ุฑููุ ุจุฑุง ุงูฺฉู ุจุชูู ุงุฒ ูุงุจูุชโูุง ุฎูู ููุด ูุตููุน
                        Gemini (ูููู ุฏฺฉููโูุง โจ) ุงุณุชูุงุฏู ฺฉูุ ุจุงุฏ ฺฉูุฏ API ุฎูุฏุช ุฑู ุงูุฌุง ูุงุฑุฏ ฺฉู. ุงู ฺฉูุฏ ููุท ุชู
                        ูุฑูุฑฺฏุฑ ุฎูุฏุช ู ุชุง ููุช ุงู ุตูุญู ุจุงุฒู ุฐุฎุฑู ูุดู (ุชู `sessionStorage`).</p>
                    <p class="mb-4 text-sm text-gray-600 leading-relaxed"><strong>ฺุฑุง ุจุงุฏ ฺฉูุฏ ุฎูุฏู ุฑู ูุงุฑุฏ
                            ฺฉููุ</strong> ฺูู ุงู ู ุงุจุฒุงุฑ ุขููุฒุดู ฺฉู ูุฑุงุฑู ุนููู ุจุงุดู (ูุซูุงู ุชู ฺฏุชโูุงุจ)ุ ุงฺฏู ูู ู
                        ฺฉูุฏ ุซุงุจุช ูโุฐุงุดุชูุ ูู ุงุฒ ูุธุฑ ุงููุช ุฏุงุณุชุงู ูโุดุฏ ู ูู ุงูฺฉู ููฺฉูู ฺฉ ุฏฺฏู ุจุฎูุงุฏ ุงุฒุด ุณูุกุงุณุชูุงุฏู
                        ฺฉูู ู ุฎุฑุฌ ุจูุชู ุฑู ุฏุณุช ุตุงุญุจ ฺฉูุฏ! ุจุฑุง ูููุ ูุฑ ฺฉุณ ุจุง ฺฉูุฏ ุฎูุฏุด ูโุชููู ุงุฒ ุงู ูุงุจูุช ุงุณุชูุงุฏู
                        ฺฉูู. ุชู ูพุฑูฺูโูุง ูุงูุน ฺฉู ุณุฑูุฑ ุฏุงุฑูุ ูุนูููุงู ฺฉูุฏูุง ุฑู ุฌุง ุงููโุชุฑ ูฺฏู ูโุฏุงุฑู.</p>
                    <div class="mb-4">
                        <label for="api-key-input" class="block text-sm font-medium text-gray-700 mb-1">ฺฉูุฏ API Gemini
                            ุฎูุฏุช:</label>
                        <input type="password" id="api-key-input"
                            class="input-field focus:ring-blue-500 focus:border-blue-500"
                            placeholder="ฺฉูุฏ API ุฑู ุงูุฌุง ฺฉูพ ฺฉู">
                    </div>
                    <button id="save-api-key-btn" class="action-button">ุฐุฎุฑู ฺฉู ฺฉูุฏ ุฑู</button>
                    <div id="api-key-status-message" class="mt-4"></div>
                </div>
            </section>

            <section id="big-theorem" class="content-section hidden">
                <div class="section-card p-6 sm:p-8 rounded-xl shadow-lg">
                    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6">
                        <h2 class="text-2xl sm:text-3xl font-bold mb-3 sm:mb-0">ูุถู ุฎููู! (ููโุงุฑุฒโูุง)</h2>
                        <button class="action-button gemini-button"
                            data-concept="ูุถู ุจุฒุฑฺฏ ููโุงุฑุฒโูุง ุจุฑุง ูุงุชุฑุณ ูุงุฑููโูพุฐุฑ" data-type="importance">
                            ฺุฑุง ุงู ูุถู ููููุ <span class="sparkle mr-2">โจ</span>
                        </button>
                    </div>
                    <p class="mb-6 text-gray-700 leading-relaxed">ุงู ูุถู ูุซู ู ุดุงูโฺฉูุฏู ุชู ุฌุจุฑ ุฎุท! ูฺฏู ุงฺฏู ู
                        ูุงุชุฑุณ ูุฑุจุน <span class="math">A</span> (ูุซูุงู <span class="math">n ร n</span>) ุฏุงุดุชู ุจุงุดุ ุงู
                        ฺูุฏุชุง ฺุฒ ุจุฑุงุด ูุซู ููู: ุนู ุงฺฏู ฺฉุด ุฏุฑุณุช ุจุงุดูุ ุจููโุดููู ุญูู!</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 text-center mt-8 mb-8">
                        <div
                            class="p-5 bg-blue-100 rounded-xl shadow-lg transform hover:scale-105 transition-transform duration-200 flex flex-col items-center justify-center">
                            <div class="text-5xl mb-3">๐</div>
                            <h4 class="font-bold text-blue-800 text-base">A ูุงุฑููโูพุฐุฑู (ูุนฺฉูุณ ุฏุงุฑู)</h4>
                        </div>
                        <div
                            class="p-5 bg-green-100 rounded-xl shadow-lg transform hover:scale-105 transition-transform duration-200 flex flex-col items-center justify-center">
                            <div class="text-5xl mb-3">๐ข</div>
                            <h4 class="font-bold text-green-800 text-base">ุฏุชุฑููุงูุด ูุฎุงูู ุตูุฑู (det(A) โ 0)</h4>
                        </div>
                        <div
                            class="p-5 bg-indigo-100 rounded-xl shadow-lg transform hover:scale-105 transition-transform duration-200 flex flex-col items-center justify-center">
                            <div class="text-5xl mb-3">๐ฏ</div>
                            <h4 class="font-bold text-indigo-800 text-base">ุฏุณุชฺฏุงู AX = b ุฌูุงุจ ุชฺฉ ู ฺฉุชุง ุฏุงุฑู</h4>
                        </div>
                        <div
                            class="p-5 bg-purple-100 rounded-xl shadow-lg transform hover:scale-105 transition-transform duration-200 flex flex-col items-center justify-center">
                            <div class="text-5xl mb-3">โก๏ธ</div>
                            <h4 class="font-bold text-purple-800 text-base">ุจุง ุนููุงุช ุณุทุฑ ุจู ูุงุชุฑุณ ููุงู
                                (I<sub>n</sub>) ูุฑุณู</h4>
                        </div>
                        <div
                            class="p-5 bg-pink-100 rounded-xl shadow-lg transform hover:scale-105 transition-transform duration-200 flex flex-col items-center justify-center">
                            <div class="text-5xl mb-3">๐</div>
                            <h4 class="font-bold text-pink-800 text-base">ุฑุชุจูโุงุด ฺฉุงููู (rank(A) = n)</h4>
                        </div>
                        <div
                            class="p-5 bg-orange-100 rounded-xl shadow-lg transform hover:scale-105 transition-transform duration-200 flex flex-col items-center justify-center">
                            <div class="text-5xl mb-3">โ๏ธ</div>
                            <h4 class="font-bold text-orange-800 text-base">ุณุชููโูุงุด (ู ุณุทุฑูุงุด) ูุณุชูู ุฎุทโุงู</h4>
                        </div>
                    </div>
                    <p
                        class="mt-8 p-5 bg-yellow-100 rounded-lg text-yellow-900 text-base leading-relaxed border-r-4 border-yellow-500">
                        ุฎูุงุตู ฺฉู ุงู ูุถู ูุซู ฺุณุจุ ฺฉู ููููู ุฑู ุจู ูู ูุตู ูโฺฉูู ู ูุดูู ูุฏู ฺูุฏุฑ ุฏูุง ูุงุชุฑุณโูุง ููุธูู!
                    </p>

                    <hr class="my-10 border-gray-300">

                    <h3 class="text-2xl font-semibold mb-6 text-gray-800">ุจุง ู ูุซุงู ุนูู ุจุจูู!</h3>
                    <p class="mb-4 text-gray-700">ูุฑุถ ฺฉู ูุงุชุฑุณ <span class="math">A = </span>
                    <div class="matrix-display">
                        <table>
                            <tbody>
                                <tr>
                                    <td>2</td>
                                    <td>1</td>
                                </tr>
                                <tr>
                                    <td>1</td>
                                    <td>1</td>
                                </tr>
                            </tbody>
                        </table>
                    </div> ุฑู ุฏุงุฑู. ุจุฑู ุจุจูู ุงู ูุถู ฺุทูุฑ ุจุฑุงุด ฺฉุงุฑ ูโฺฉูู.</p>
                    <button id="solve-big-theorem-example-btn" class="action-button mb-6">ุดุฑูุน ฺฉู ูุซุงู ุฑู!</button>
                    <div id="big-theorem-example-solution" class="mt-6 space-y-6">
                        <!-- Steps will be populated here by JavaScript -->
                    </div>
                </div>
            </section>

            <div id="gemini-modal" class="modal">
                <div class="modal-content"><button id="modal-close-btn" class="modal-close-btn">&times;</button>
                    <h3 id="gemini-modal-title" class="text-2xl font-bold mb-5 text-blue-700"></h3>
                    <div id="gemini-modal-body" class="prose-gemini text-gray-800 leading-relaxed">
                        <div class="loading-spinner"></div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('.content-section');
            const solutionButtons = document.querySelectorAll('button[id^="solve-"]');
            const calculateMatrixOpsBtn = document.getElementById('calculate-matrix-ops-btn');
            const geminiButtons = document.querySelectorAll('.gemini-button');
            const geminiModal = document.getElementById('gemini-modal');
            const geminiModalTitle = document.getElementById('gemini-modal-title');
            const geminiModalBody = document.getElementById('gemini-modal-body');
            const modalCloseBtn = document.getElementById('modal-close-btn');
            const apiKeyInput = document.getElementById('api-key-input');
            const saveApiKeyBtn = document.getElementById('save-api-key-btn');
            const apiKeyStatusMessage = document.getElementById('api-key-status-message');
            const matrixOperationSelect = document.getElementById('matrix-operation-select');
            const matrixInputAreaBWrapper = document.getElementById('matrix-input-area-B-wrapper');
            const scalarInputWrapper = document.getElementById('scalar-input-wrapper');
            const bigTheoremExampleBtn = document.getElementById('solve-big-theorem-example-btn');

            let userApiKey = sessionStorage.getItem('geminiApiKeyLA');

            function updateApiKeyStatus() {
                if (userApiKey) {
                    apiKeyStatusMessage.innerHTML = '<p class="api-key-status api-key-set">ฺฉูุฏ API Gemini ูุนุงูู ู ุขูุงุฏู ุงุณุชูุงุฏู ุงุณุช.</p>';
                    geminiButtons.forEach(btn => btn.disabled = false);
                    if (apiKeyInput) apiKeyInput.value = userApiKey;
                } else {
                    apiKeyStatusMessage.innerHTML = '<p class="api-key-status api-key-not-set">ูููุฒ ฺฉูุฏ API Gemini ุฑู ูุงุฑุฏ ูฺฉุฑุฏ! ุจุฑุง ุงุณุชูุงุฏู ุงุฒ ุชูุถุญุงุช Geminiุ ูุทูุงู ฺฉูุฏุช ุฑู ูุงุฑุฏ ฺฉู.</p>';
                    geminiButtons.forEach(btn => btn.disabled = true);
                }
            }

            if (saveApiKeyBtn) {
                saveApiKeyBtn.addEventListener('click', () => {
                    const newKey = apiKeyInput.value.trim();
                    if (newKey) {
                        sessionStorage.setItem('geminiApiKeyLA', newKey);
                        userApiKey = newKey;
                        alert('ฺฉูุฏ API ุจุง ููููุช ุชู ุญุงูุธู ูุฑูุฑฺฏุฑุช (ุจุฑุง ุงู ุฏูุนู) ุฐุฎุฑู ุดุฏ.');
                    } else {
                        sessionStorage.removeItem('geminiApiKeyLA');
                        userApiKey = null;
                        alert('ฺฉูุฏ API ูพุงฺฉ ุดุฏ. ุงฺฏู ุฏูุจุงุฑู ุฎูุงุณุช ุงุฒ Gemini ุงุณุชูุงุฏู ฺฉูุ ุจุงุฏ ูุงุฑุฏุด ฺฉู.');
                    }
                    updateApiKeyStatus();
                });
            }
            updateApiKeyStatus();


            function setActiveLink(targetId) {
                navLinks.forEach(link => {
                    link.classList.remove('active-nav-link');
                    if (link.getAttribute('href') === `#${targetId}`) {
                        link.classList.add('active-nav-link');
                    }
                });
            }

            navLinks.forEach(link => {
                link.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href').substring(1);
                    sections.forEach(section => section.classList.add('hidden'));
                    const targetSection = document.getElementById(targetId);
                    if (targetSection) targetSection.classList.remove('hidden');
                    setActiveLink(targetId);
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            });

            solutionButtons.forEach(button => {
                button.addEventListener('click', function () {
                    const idParts = this.id.split('-');
                    if (idParts.length < 2 || idParts[0] !== 'solve') return;
                    let conceptPrefix = idParts.slice(1, -1).join('-');
                    // Handle specific case for big-theorem-example-btn
                    if (this.id === 'solve-big-theorem-example-btn') {
                        conceptPrefix = 'big-theorem-example';
                    }
                    const solutionDivId = conceptPrefix + '-solution';

                    const solutionDiv = document.getElementById(solutionDivId);

                    if (solutionDiv) {
                        const steps = Array.from(solutionDiv.querySelectorAll('.step'));
                        steps.forEach(step => {
                            step.classList.remove('visible');
                            step.style.opacity = '0';
                            step.style.transform = 'translateY(25px)';
                            if (step.animationTimeout) clearTimeout(step.animationTimeout);
                        });
                        steps.forEach((step, index) => {
                            step.animationTimeout = setTimeout(() => {
                                step.style.opacity = '1'; // Ensure opacity is set to 1
                                step.classList.add('visible');
                            }, index * 450 + 50); // Slightly adjusted timing
                        });
                    }
                    if (this.id === 'solve-indep-btn') {
                        // Ensure canvas elements exist before trying to render charts
                        if (document.getElementById('indep-chart') && document.getElementById('dep-chart')) {
                            setTimeout(renderIndependenceCharts, 50);
                        }
                    }
                });
            });

            if (bigTheoremExampleBtn) {
                bigTheoremExampleBtn.addEventListener('click', function () {
                    // This button's logic for displaying steps is now handled by the generic solutionButtons listener above.
                    // We can just hide the button if needed.
                    // this.style.display = 'none'; // Optionally hide after click
                });

                // Populate big theorem example steps (assuming this is static content for the example)
                const bigTheoremSolutionDiv = document.getElementById('big-theorem-example-solution');
                if (bigTheoremSolutionDiv) { // Ensure it exists
                    const exampleStepsContent = [
                        {
                            title: "ฑ. ูุญุงุณุจู ุฏุชุฑููุงู A",
                            content: `ุจุฑุง ูุงุชุฑุณ <span class="math">A = </span><div class="matrix-display"><table><tbody><tr><td>2</td><td>1</td></tr><tr><td>1</td><td>1</td></tr></tbody></table></div>ุ ุฏุชุฑููุงู ุงูุทูุฑ ุญุณุงุจ ูุดู: <span class="math">det(A) = (2)(1) - (1)(1) = 2 - 1 = 1</span>.<br> ฺูู ุฏุชุฑููุงู (<span class="math">1</span>) ูุฎุงูู ุตูุฑูุ ูพุณ ูุงุชุฑุณ <span class="font-bold">ูุงุฑููโูพุฐุฑู</span> ู ุจูู ุดุฑุงุท ูู ุจุงุฏ ุจุฑูุฑุงุฑ ุจุงุดู!`
                        },
                        {
                            title: "ฒ. ุชุจุฏู A ุจู ูุฑู ูพูฺฉุงู ฺฉุงูุดโุงูุชู (RREF)",
                            content: `ุงฺฏู A ุฑู ูพูฺฉุงู ฺฉุงูุดโุงูุชู ฺฉููุ ุจู ุงู ูโุฑุณู:<br>
                            <span class="math">R<sub>2</sub> = R<sub>2</sub> - (1/2)R<sub>1</sub></span>  โ <div class="matrix-display"><table><tbody><tr><td>2</td><td>1</td></tr><tr><td>0</td><td>0.5</td></tr></tbody></table></div><br>
                            <span class="math">R<sub>1</sub> = R<sub>1</sub> / 2</span> โ <div class="matrix-display"><table><tbody><tr><td>1</td><td>0.5</td></tr><tr><td>0</td><td>0.5</td></tr></tbody></table></div><br>
                            <span class="math">R<sub>2</sub> = R<sub>2</sub> / 0.5</span> โ <div class="matrix-display"><table><tbody><tr><td>1</td><td>0.5</td></tr><tr><td>0</td><td>1</td></tr></tbody></table></div><br>
                            <span class="math">R<sub>1</sub> = R<sub>1</sub> - 0.5R<sub>2</sub></span> โ <div class="matrix-display"><table><tbody><tr><td>1</td><td>0</td></tr><tr><td>0</td><td>1</td></tr></tbody></table></div><br>
                            ูโุจูู ฺฉู ุจู ูุงุชุฑุณ ููุงู <span class="math">I<sub>2</sub></span> ุฑุณุฏู. ุงูู ู ูุดููู ุฏฺฏู ุงุฒ ูุงุฑููโูพุฐุฑ!`
                        },
                        {
                            title: "ณ. ุฑุชุจู ูุงุชุฑุณ A",
                            content: `ุงุฒ RREF ุจุงูุงุ ูโุจูู ฺฉู ฒ ุณุทุฑ ุบุฑ ุตูุฑ ุฏุงุฑู. ูพุณ <span class="math">rank(A) = 2</span>. ฺูู ูุงุชุฑุณ ูุง ฒxฒ ูุณุช ู ุฑุชุจูโุงุด ูู ฒ ุดุฏู (ุนู <span class="math">n=2</span>)ุ ูพุณ ูููโุฑูฺฉู.`
                        },
                        {
                            title: "ด. ุงุณุชููุงู ุฎุท ุณุชููโูุง",
                            content: `ุณุชููโูุง A ุนุจุงุฑุชูุฏ ุงุฒ <span class="math"><span class="vector">c</span><sub>1</sub> = (2,1)</span> ู <span class="math"><span class="vector">c</span><sub>2</sub> = (1,1)</span>. ุงฺฏู ุชุฑฺฉุจ ุฎุท <span class="math">k<sub>1</sub><span class="vector">c</span><sub>1</sub> + k<sub>2</sub><span class="vector">c</span><sub>2</sub> = (0,0)</span> ุฑู ุญู ฺฉููุ ุชููุง ุฌูุงุจุด <span class="math">k<sub>1</sub>=0, k<sub>2</sub>=0</span> ูุณุช. ูพุณ ุณุชููโูุง <span class="font-bold">ูุณุชูู ุฎุท</span> ูุณุชู.`
                        },
                        {
                            title: "ต. ุฌูุงุจ ฺฉุชุง ุฏุณุชฺฏุงู AX = b",
                            content: `ฺูู A ูุงุฑููโูพุฐุฑูุ ุจุฑุง ูุฑ ุจุฑุฏุงุฑ <span class="math"><span class="vector">b</span></span> ุฏุฑ <span class="math">โ<sup>2</sup></span>ุ ุฏุณุชฺฏุงู <span class="math">A<span class="vector">X</span> = <span class="vector">b</span></span> ู ุฌูุงุจ ฺฉุชุง ู ุฎูุดฺฏู ุฏุงุฑู ฺฉู ุงุฒ <span class="math"><span class="vector">X</span> = A<sup>-1</sup><span class="vector">b</span></span> ุจู ุฏุณุช ูุงุฏ.`
                        }
                    ];
                    exampleStepsContent.forEach((stepData) => {
                        const stepDiv = document.createElement('div');
                        stepDiv.classList.add('step', 'p-6', 'bg-blue-50', 'rounded-xl', 'border', 'border-blue-200');
                        // Keep opacity 0 initially, will be handled by button click
                        stepDiv.style.opacity = '0';
                        stepDiv.style.transform = 'translateY(25px)';
                        stepDiv.innerHTML = `<h4 class="font-semibold text-blue-800 text-lg mb-3">${stepData.title}</h4><p class="text-gray-700 leading-relaxed">${stepData.content}</p>`;
                        bigTheoremSolutionDiv.appendChild(stepDiv);
                    });
                }
            }


            function renderIndependenceCharts() {
                ['indep-chart', 'dep-chart'].forEach(chartId => {
                    const canvas = document.getElementById(chartId); if (!canvas) return;
                    const existingChart = Chart.getChart(canvas); if (existingChart) existingChart.destroy();
                });
                const indepCtx = document.getElementById('indep-chart')?.getContext('2d');
                if (indepCtx) new Chart(indepCtx, { type: 'scatter', data: { datasets: [{ label: 'vโ = (1, 2)', data: [{ x: 1, y: 2 }], backgroundColor: '#007bff', pointRadius: 7, pointHoverRadius: 9 }, { label: 'vโ = (2, 1)', data: [{ x: 2, y: 1 }], backgroundColor: '#dc3545', pointRadius: 7, pointHoverRadius: 9 }, { label: 'ูุจุฏุฃ', data: [{ x: 0, y: 0 }], backgroundColor: '#6c757d', pointRadius: 5 }] }, options: { responsive: true, maintainAspectRatio: false, scales: { x: { min: -0.5, max: 3.5, ticks: { stepSize: 1, color: '#495057' }, grid: { color: '#e9ecef' } }, y: { min: -0.5, max: 3.5, ticks: { stepSize: 1, color: '#495057' }, grid: { color: '#e9ecef' } } }, plugins: { legend: { position: 'bottom', labels: { font: { family: 'Vazirmatn', size: 12 }, color: '#495057' } } } } });
                const depCtx = document.getElementById('dep-chart')?.getContext('2d');
                if (depCtx) new Chart(depCtx, { type: 'scatter', data: { datasets: [{ label: 'uโ = (1, 2)', data: [{ x: 1, y: 2 }], backgroundColor: '#007bff', pointRadius: 7, pointHoverRadius: 9 }, { label: 'uโ = (2, 4)', data: [{ x: 2, y: 4 }], backgroundColor: '#dc3545', pointRadius: 7, pointHoverRadius: 9 }, { type: 'line', label: 'ุฎุท ูุงุจุณุชฺฏ', data: [{ x: 0, y: 0 }, { x: 1, y: 2 }, { x: 2, y: 4 }], borderColor: 'rgba(255, 193, 7, 0.7)', fill: false, pointRadius: 0, borderWidth: 2.5, tension: 0.1 }] }, options: { responsive: true, maintainAspectRatio: false, scales: { x: { min: -0.5, max: 3.5, ticks: { stepSize: 1, color: '#495057' }, grid: { color: '#e9ecef' } }, y: { min: -0.5, max: 4.5, ticks: { stepSize: 1, color: '#495057' }, grid: { color: '#e9ecef' } } }, plugins: { legend: { position: 'bottom', labels: { font: { family: 'Vazirmatn', size: 12 }, color: '#495057' } } } } });
            }

            if (matrixOperationSelect) {
                matrixOperationSelect.addEventListener('change', function () {
                    const selectedOp = this.value;
                    matrixInputAreaBWrapper.classList.toggle('hidden', !(selectedOp === 'add' || selectedOp === 'subtract'));
                    scalarInputWrapper.classList.toggle('hidden', selectedOp !== 'scalar_multiply');
                });
            }

            if (calculateMatrixOpsBtn) calculateMatrixOpsBtn.addEventListener('click', handleMatrixOperations);

            function parseMatrixInput(inputString, matrixName = "ูุงุชุฑุณ") {
                if (inputString.trim() === '') throw new Error(`${matrixName} ุฎุงู ุงุณุช. ูุทูุงู ููุงุฏุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ.`);
                const rows = inputString.trim().split('\n');
                const matrix = rows.map(rowStr => rowStr.trim().split(/[\s,]+/).map(val => {
                    const num = parseFloat(val); if (isNaN(num)) throw new Error(`ููุฏุงุฑ ูุงูุนุชุจุฑ '${val}' ุฏุฑ ${matrixName}.`); return num;
                }));
                if (matrix.length === 0) throw new Error(`${matrixName} ุดุงูู ุณุทุฑ ูุณุช.`);
                if (matrix[0].length === 0) throw new Error(`ุณุทุฑ ุงูู ${matrixName} ุฎุงู ุงุณุช.`);
                const numCols = matrix[0].length;
                if (matrix.some(row => row.length !== numCols)) throw new Error(`ุชูุงู ุณุทุฑูุง ${matrixName} ุจุงุฏ ุชุนุฏุงุฏ ุณุชูู ฺฉุณุงู ุฏุงุดุชู ุจุงุดูุฏ.`);
                return matrix;
            }

            function formatMatrixToHTML(matrix, caption) {
                let html = `<div class="mb-4 matrix-display-wrapper"><p class="font-semibold mb-2 text-sm text-gray-700">${caption}:</p>`;
                if (!matrix || matrix.length === 0 || (matrix[0] && matrix[0].length === 0)) { html += `<p class="text-gray-500 italic">ูุงุชุฑุณ ุฎุงู ุง ูุงูุนุชุจุฑ.</p></div>`; return html; }
                html += '<div class="matrix-display"><table><tbody>';
                matrix.forEach(row => { html += '<tr>'; row.forEach(val => { let displayVal = Number.isInteger(val) ? val : (Math.abs(val) < 1e-9 ? 0 : val.toFixed(2)); if (String(displayVal) === "-0.00") displayVal = "0.00"; html += `<td>${displayVal}</td>`; }); html += '</tr>'; });
                html += '</tbody></table></div></div>'; return html;
            }

            function cloneMatrix(matrix) { return matrix.map(row => [...row]); }

            function toRREF_extended(matrix_orig) {
                let matrix = cloneMatrix(matrix_orig); let lead = 0; const rowCount = matrix.length; let stepsHtml = [];
                if (rowCount === 0 || matrix[0].length === 0) { stepsHtml.push(formatMatrixToHTML(matrix, "ูุงุชุฑุณ ูุฑูุฏ ุฎุงู ุง ูุฑูุช ูุงูุนุชุจุฑ ุฏุงุฑุฏ")); return { rref: [], steps: stepsHtml, rank: 0, basis: [] }; }
                const colCount = matrix[0].length; stepsHtml.push(formatMatrixToHTML(matrix, "ูุงุชุฑุณ ุงููู"));
                for (let r = 0; r < rowCount; r++) {
                    if (lead >= colCount) break;
                    let i = r; while (i < rowCount && Math.abs(matrix[i][lead]) < 1e-9) i++;
                    if (i < rowCount) {
                        if (i !== r) { [matrix[i], matrix[r]] = [matrix[r], matrix[i]]; stepsHtml.push(formatMatrixToHTML(matrix, `R${r + 1} โ R${i + 1}`)); }
                        let pivotVal = matrix[r][lead];
                        if (Math.abs(pivotVal) > 1e-9 && Math.abs(pivotVal - 1) > 1e-9) { for (let j = lead; j < colCount; j++) matrix[r][j] /= pivotVal; stepsHtml.push(formatMatrixToHTML(matrix, `R${r + 1} = R${r + 1} / ${pivotVal.toFixed(2)}`)); }
                        if (Math.abs(matrix[r][lead]) > 1e-9) matrix[r][lead] = 1; else matrix[r][lead] = 0;
                        for (let k = 0; k < rowCount; k++) { if (k !== r) { let factor = matrix[k][lead]; if (Math.abs(factor) > 1e-9) { for (let j = lead; j < colCount; j++) matrix[k][j] -= factor * matrix[r][j]; stepsHtml.push(formatMatrixToHTML(matrix, `R${k + 1} = R${k + 1} - (${factor.toFixed(2)})R${r + 1}`)); } } }
                        lead++;
                    }
                }
                for (let r_idx = 0; r_idx < rowCount; r_idx++) { for (let c_idx = 0; c_idx < colCount; c_idx++) { if (Math.abs(matrix[r_idx][c_idx]) < 1e-9) matrix[r_idx][c_idx] = 0; } }
                stepsHtml.push(formatMatrixToHTML(matrix, "ูุฑู ูพูฺฉุงู ุชุญูู ุงูุชู (RREF) ููุง"));
                let rank = 0; matrix.forEach(row => { if (row.some(val => Math.abs(val) > 1e-9)) rank++; });
                let basis = matrix.filter(row => row.some(val => Math.abs(val) > 1e-9));
                return { rref: matrix, steps: stepsHtml, rank: rank, basis: basis };
            }

            function calculateDeterminant(matrix) {
                const rows = matrix.length;
                if (rows === 0) return { value: NaN, steps: ["ูุงุชุฑุณ ุฎุงู ุงุณุช."] };
                const cols = matrix[0].length;
                if (rows !== cols) throw new Error("ุฏุชุฑููุงู ููุท ุจุฑุง ูุงุชุฑุณโูุง ูุฑุจุน ุชุนุฑู ุดุฏู.");
                let stepsHtml = [formatMatrixToHTML(matrix, "ูุงุชุฑุณ ุจุฑุง ูุญุงุณุจู ุฏุชุฑููุงู")]; let det;
                if (rows === 1) { det = matrix[0][0]; stepsHtml.push(`<p>ุฏุชุฑููุงู ูุงุชุฑุณ ฑxฑ ุจุฑุงุจุฑ ุฎูุฏ ุฏุฑุงู ุงุณุช: <span class="math">${det}</span></p>`); }
                else if (rows === 2) { det = matrix[0][0] * matrix[1][1] - matrix[0][1] * matrix[1][0]; stepsHtml.push(`<p>ุจุฑุง ูุงุชุฑุณ ฒxฒุ <span class="math">det = ad - bc</span>:</p><p class="math">(${matrix[0][0]})(${matrix[1][1]}) - (${matrix[0][1]})(${matrix[1][0]}) = ${det}</p>`); }
                else if (rows === 3) { det = matrix[0][0] * (matrix[1][1] * matrix[2][2] - matrix[1][2] * matrix[2][1]) - matrix[0][1] * (matrix[1][0] * matrix[2][2] - matrix[1][2] * matrix[2][0]) + matrix[0][2] * (matrix[1][0] * matrix[2][1] - matrix[1][1] * matrix[2][0]); stepsHtml.push(`<p>ุจุฑุง ูุงุชุฑุณ ณxณ ุจุง ุงุณุชูุงุฏู ุงุฒ ุฑูุด ุณุงุฑูุณ (ุจุณุท ุณุทุฑ ุงูู):</p><p class="math">${matrix[0][0]}*det(<div class="matrix-display"><table><tr><td>${matrix[1][1]}</td><td>${matrix[1][2]}</td></tr><tr><td>${matrix[2][1]}</td><td>${matrix[2][2]}</td></tr></table></div>)-${matrix[0][1]}*det(<div class="matrix-display"><table><tr><td>${matrix[1][0]}</td><td>${matrix[1][2]}</td></tr><tr><td>${matrix[2][0]}</td><td>${matrix[2][2]}</td></tr></table></div>)+${matrix[0][2]}*det(<div class="matrix-display"><table><tr><td>${matrix[1][0]}</td><td>${matrix[1][1]}</td></tr><tr><td>${matrix[2][0]}</td><td>${matrix[2][1]}</td></tr></table></div>) = ${det}</p>`); }
                else { throw new Error("ูุญุงุณุจู ุฏุชุฑููุงู ุจุฑุง ูุงุชุฑุณโูุง ุจุฒุฑฺฏุชุฑ ุงุฒ ณxณ ุฏุฑ ุงู ุงุจุฒุงุฑ ูพุดุชุจุงู ููโุดูุฏ."); }
                stepsHtml.push(`<div class="p-3 bg-green-100 text-green-800 rounded-md"><h5 class="font-bold">ููุฏุงุฑ ุฏุชุฑููุงู: <span class="math text-xl">${det.toFixed(4)}</span></h5></div>`);
                return { value: det, steps: stepsHtml };
            }

            function transposeMatrix(matrix) {
                if (matrix.length === 0) return { transposed: [], steps: ["ูุงุชุฑุณ ูุฑูุฏ ุฎุงู ุงุณุช."] };
                const rows = matrix.length; const cols = matrix[0].length;
                const transposed = Array(cols).fill(null).map(() => Array(rows).fill(null));
                for (let i = 0; i < rows; i++) { for (let j = 0; j < cols; j++) { transposed[j][i] = matrix[i][j]; } }
                let stepsHtml = [formatMatrixToHTML(matrix, "ูุงุชุฑุณ ุงููู"), formatMatrixToHTML(transposed, "ูุงุชุฑุณ ุชุฑุงููุงุฏู (A<sup>T</sup>)")];
                return { transposed: transposed, steps: stepsHtml };
            }

            function addOrSubtractMatrices(matrixA, matrixB, operation) {
                const rowsA = matrixA.length; const colsA = matrixA[0].length; const rowsB = matrixB.length; const colsB = matrixB[0].length;
                if (rowsA !== rowsB || colsA !== colsB) throw new Error("ุจุฑุง ุฌูุน ุง ุชูุฑูุ ุงุจุนุงุฏ ุฏู ูุงุชุฑุณ ุจุงุฏ ฺฉุณุงู ุจุงุดูุฏ.");
                const resultMatrix = cloneMatrix(matrixA);
                for (let i = 0; i < rowsA; i++) { for (let j = 0; j < colsA; j++) { if (operation === 'add') resultMatrix[i][j] += matrixB[i][j]; else resultMatrix[i][j] -= matrixB[i][j]; } }
                const opSymbol = operation === 'add' ? '+' : '-'; const opName = operation === 'add' ? 'ุฌูุน' : 'ุชูุฑู';
                let stepsHtml = [formatMatrixToHTML(matrixA, "ูุงุชุฑุณ A"), formatMatrixToHTML(matrixB, `ูุงุชุฑุณ B (ุจุฑุง ${opName})`), formatMatrixToHTML(resultMatrix, `ูุชุฌู ${opName} (A ${opSymbol} B)`)];
                return { result: resultMatrix, steps: stepsHtml };
            }

            function multiplyMatrixByScalar(matrix, scalar) {
                if (isNaN(scalar)) throw new Error("ููุฏุงุฑ ุงุณฺฉุงูุฑ ุจุงุฏ ฺฉ ุนุฏุฏ ุจุงุดุฏ.");
                const resultMatrix = cloneMatrix(matrix);
                for (let i = 0; i < resultMatrix.length; i++) { for (let j = 0; j < resultMatrix[0].length; j++) { resultMatrix[i][j] *= scalar; } }
                let stepsHtml = [formatMatrixToHTML(matrix, "ูุงุชุฑุณ ุงููู (A)"), `<p class="mb-2 text-sm text-gray-700">ุถุฑุจ ุฏุฑ ุงุณฺฉุงูุฑ: <span class="math font-bold">${scalar}</span></p>`, formatMatrixToHTML(resultMatrix, `ูุชุฌู ุถุฑุจ ุงุณฺฉุงูุฑ (${scalar}A)`)];
                return { result: resultMatrix, steps: stepsHtml };
            }

            function handleMatrixOperations() {
                const operation = matrixOperationSelect.value; const inputStringA = document.getElementById('matrix-input-A').value; const resultsDiv = document.getElementById('matrix-ops-results'); resultsDiv.innerHTML = '';
                try {
                    const matrixA = parseMatrixInput(inputStringA, "ูุงุชุฑุณ A"); let operationResult;
                    switch (operation) {
                        case 'rref_rank_basis': operationResult = toRREF_extended(matrixA); operationResult.steps.forEach((stepHtml, index) => { const stepDiv = document.createElement('div'); stepDiv.classList.add('step', 'p-3', 'bg-gray-50', 'rounded-md', 'border', 'border-gray-200'); stepDiv.innerHTML = stepHtml; resultsDiv.appendChild(stepDiv); setTimeout(() => stepDiv.classList.add('visible'), index * 200 + 50); }); const rankResultHtml = `<div class="step p-4 bg-green-100 text-green-800 rounded-md mt-4 border border-green-200"><h4 class="font-bold">ุฑุชุจู ูุงุชุฑุณ:</h4><p class="text-2xl font-bold">${operationResult.rank}</p></div>`; resultsDiv.insertAdjacentHTML('beforeend', rankResultHtml); setTimeout(() => resultsDiv.querySelector('.bg-green-100.step').classList.add('visible'), operationResult.steps.length * 200 + 100); let basisHtml = `<div class="step p-4 bg-blue-100 text-blue-800 rounded-md mt-2 border border-blue-200"><h4 class="font-bold">ฺฉ ูพุงู ุจุฑุง ูุถุง ุณุทุฑ:</h4>`; if (operationResult.basis.length > 0) { basisHtml += '<ul class="list-disc list-inside pr-5 mt-2 space-y-1">'; operationResult.basis.forEach(rowVector => { basisHtml += `<li class="math">{ ${rowVector.map(n => (Math.abs(n) < 1e-9 ? 0 : (Number.isInteger(n) ? n : n.toFixed(2)))).join(', ')} }</li>`; }); basisHtml += '</ul>'; } else { basisHtml += '<p class="mt-1">ูุถุง ุณุทุฑ ููุท ุดุงูู ุจุฑุฏุงุฑ ุตูุฑ ุงุณุช (ูพุงู ุชูุ ุฑุชุจู ุตูุฑ).</p>'; } basisHtml += '</div>'; resultsDiv.insertAdjacentHTML('beforeend', basisHtml); setTimeout(() => resultsDiv.querySelector('.bg-blue-100.step').classList.add('visible'), operationResult.steps.length * 200 + 150); break;
                        case 'determinant': operationResult = calculateDeterminant(matrixA); operationResult.steps.forEach((stepHtml, index) => { const stepDiv = document.createElement('div'); stepDiv.classList.add('step', 'p-3', 'bg-gray-50', 'rounded-md', 'border', 'border-gray-200'); stepDiv.innerHTML = stepHtml; resultsDiv.appendChild(stepDiv); setTimeout(() => stepDiv.classList.add('visible'), index * 200 + 50); }); break;
                        case 'transpose': operationResult = transposeMatrix(matrixA); operationResult.steps.forEach((stepHtml, index) => { const stepDiv = document.createElement('div'); stepDiv.classList.add('step', 'p-3', 'bg-gray-50', 'rounded-md', 'border', 'border-gray-200'); stepDiv.innerHTML = stepHtml; resultsDiv.appendChild(stepDiv); setTimeout(() => stepDiv.classList.add('visible'), index * 200 + 50); }); break;
                        case 'add': case 'subtract': const inputStringB = document.getElementById('matrix-input-B').value; const matrixB = parseMatrixInput(inputStringB, "ูุงุชุฑุณ B"); operationResult = addOrSubtractMatrices(matrixA, matrixB, operation); operationResult.steps.forEach((stepHtml, index) => { const stepDiv = document.createElement('div'); stepDiv.classList.add('step', 'p-3', 'bg-gray-50', 'rounded-md', 'border', 'border-gray-200'); stepDiv.innerHTML = stepHtml; resultsDiv.appendChild(stepDiv); setTimeout(() => stepDiv.classList.add('visible'), index * 200 + 50); }); break;
                        case 'scalar_multiply': const scalarVal = parseFloat(document.getElementById('scalar-input').value); operationResult = multiplyMatrixByScalar(matrixA, scalarVal); operationResult.steps.forEach((stepHtml, index) => { const stepDiv = document.createElement('div'); stepDiv.classList.add('step', 'p-3', 'bg-gray-50', 'rounded-md', 'border', 'border-gray-200'); stepDiv.innerHTML = stepHtml; resultsDiv.appendChild(stepDiv); setTimeout(() => stepDiv.classList.add('visible'), index * 200 + 50); }); break;
                    }
                } catch (error) { resultsDiv.innerHTML = `<p class="text-red-600 font-semibold p-4 bg-red-100 rounded-md border border-red-300">ุฎุทุง: ${error.message}</p>`; }
            }

            geminiButtons.forEach(button => {
                button.addEventListener('click', async function () {
                    if (!userApiKey) { alert("ุฑููุ ุงูู ุจุงุฏ ฺฉูุฏ API Gemini ุฑู ุชู ุจุฎุด 'ุชูุธูุงุช API' ูุงุฑุฏ ฺฉู ุชุง ุงู ุฏฺฉูู ฺฉุงุฑ ฺฉูู!"); return; }
                    const concept = this.dataset.concept; const type = this.dataset.type; let promptText = "";
                    if (type === 'deeper') { geminiModalTitle.textContent = `ุชูุถุญ ุนููโุชุฑ ุฏุฑุจุงุฑู: ${concept}`; promptText = `ุจู ุฒุจุงู ุณุงุฏู ู ุฎูุฏูููุ ููููู '${concept}' ุฏุฑ ุฌุจุฑ ุฎุท ุฑู ุจุง ู ูุซุงู ุฎูุจ ุชูุถุญ ุจุฏู. ูุฎูุงู ุฏุฑฺฉ ุดููุฏ ูพุฏุง ฺฉูู ู ุงฺฏู ฺฉุงุฑุจุฑุฏ ูู ุฏุงุฑู ุจฺฏ. ุงุฒ ูุดุงูู ฺฏุฐุงุฑ Markdown ุจุฑุง ูุฑูููโูุง (ูุซูุง \`A*X=B\`)ุ ูุณุชโูุง ู **ูพุฑุฑูฺฏ ฺฉุฑุฏู** ุง *ฺฉุฌ ฺฉุฑุฏู* ุงุณุชูุงุฏู ฺฉู. ุฌูุงุจ ุจุงุฏ ุจู ุฒุจุงู ูุงุฑุณ ุจุงุดู.`; }
                    else if (type === 'importance') { geminiModalTitle.textContent = `ุงููุช ู ฺฉุงุฑุจุฑุฏูุง: ${concept}`; promptText = `ุฑููุ ุงููุช ู ฺฉุงุฑุจุฑุฏูุง ูุงูุน ููููู '${concept}' ุฏุฑ ุฌุจุฑ ุฎุท ฺูุ ูุฎุตูุตุงู ุชู ุฏูุง ฺฉุงููพูุชุฑุ ูููุฏุณุ ุง ุชุญูู ุฏุงุฏู. ฺูุฏุชุง ูุซุงู ููููุณ ุจุฒู. ุงฺฏู ููฺฉูู ุงุฒ Markdown ุจุฑุง ุฎูุงูุง ุจูุชุฑ (ูุณุชุ **ุชุงฺฉุฏ**) ุงุณุชูุงุฏู ฺฉู. ุฌูุงุจ ูุงุฑุณ ุจุงุดู ูุทูุงู.`; }

                    geminiModalBody.innerHTML = '<div class="loading-spinner"></div><p class="text-center text-gray-500 mt-2">ุตุจุฑ ฺฉู ุฏุงุฑู ุงุฒ Gemini ููพุฑุณู...</p>'; geminiModal.classList.add('active');
                    try {
                        let chatHistory = [{ role: "user", parts: [{ text: promptText }] }]; const payload = { contents: chatHistory };
                        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${userApiKey}`;
                        const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                        if (!response.ok) { const errorData = await response.json(); throw new Error(`API Error (${response.status}): ${errorData.error?.message || 'Unknown server error'}`); }
                        const result = await response.json();
                        if (result.candidates && result.candidates[0].content && result.candidates[0].content.parts && result.candidates[0].content.parts.length > 0) {
                            const rawText = result.candidates[0].content.parts[0].text;
                            const htmlContent = typeof marked !== 'undefined' ? marked.parse(rawText) : rawText.replace(/\n/g, '<br>');
                            geminiModalBody.innerHTML = `<div class="prose-gemini max-w-none">${htmlContent}</div>`;
                        } else { geminiModalBody.innerHTML = "<p class='text-red-600 font-semibold'>ูุชุงุณูุงูู ูพุงุณุฎ ุงุฒ Gemini ุฏุฑุงูุช ูุดุฏ ุง ูุฑูุช ูพุงุณุฎ ุฏุฑุณุช ูุณุช.</p>"; }
                    } catch (error) { geminiModalBody.innerHTML = `<p class='text-red-600 font-semibold'>ุง ุจุงุจุง! ุฎุทุง ุฏุฑ ุงุฑุชุจุงุท ุจุง Gemini: ${error.message}. ูุทูุงู ฺฉูุฏ API ู ุงูุชุฑูุชุช ุฑู ฺฺฉ ฺฉู ู ุฏูุจุงุฑู ุงูุชุญุงู ฺฉู.</p>`; }
                });
            });

            modalCloseBtn.addEventListener('click', () => geminiModal.classList.remove('active'));
            geminiModal.addEventListener('click', (e) => { if (e.target === geminiModal) geminiModal.classList.remove('active'); });

            setActiveLink('intro');
        });
    </script>
</body>

</html>